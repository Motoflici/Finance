{% extends 'base.html' %}
{% block content %}
    <h1>{% block title %} Simulator oferta pret {% endblock %}</h1>
    <form method="POST" action="/priceSimulator/">
        {{ form1.csrf_token }}
        <table>
            <tr><th>{{ form1.workItem.label }}</th><th>{{ form1.workItemType.label }}</th><th>{{ form1.workItemTypeComplexity.label }}</th><th>{{ form1.workItemDuration.label }}</th><th>Proposed rate</th></tr>

            <tr><td>{{ form1.workItem }}</td><td id="workType">{{ form1.workItemType }}</td><td id="complexity">{{ form1.workItemTypeComplexity }}</td><td id="workItemDuration">{{ form1.workItemDuration }}</td>
                <td id="demo">0</td></tr>

            <tr><td>{% if form1.workItem.errors %}
            <ul class="errors">
                {% for error in form1.workItem.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}</td><td>{% if form1.workItemType.errors %}
            <ul class="errors">
                {% for error in form1.workItemType.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}</td><td>{% if form1.workItemTypeComplexity.errors %}
            <ul class="errors">
                {% for error in form1.workItemTypeComplexity.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}</td><td>{% if form1.workItemDuration.errors %}
            <ul class="errors">
                {% for error in form1.workItemDuration.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}</td></tr>
        </table>
            <input type="submit" name="Calculate" value="Calculate">
        <button type="button" onclick='document.getElementById("demo").innerHTML = "Hello JavaScript!"'>Click Me!</button>
        <button type="button" onclick='calculateRate()'>Apasa!</button>


</form>
<script>
document.getElementById("Simulate").onclick = function() {calculateRate()};

var workItemType;
var complexity;
var duration;
var baseRate;
var complexityFactor;
var durationFactor;
var simulatedRate;

function calculatebaseRate(){
    if (workItemType == "B2B Course")
    baseRate = 1000;
    }else {
    baseRate = 600;
} return baseRate;

function calculateComplexityFactor(){
    if (complexity == "Low") {
    complexityFactor = 1;
    } else if (complexity == "Mid") {
    complexityFactor = 2;
    } else {
    complexityFactor = 3;
    }
} return complexityFactor;

function calculateDurationFactor(){
    if (duration < 5) {
    durationFactor = 3
    } else {
    durationFactor = 1
    }
} return durationFactor;

function calculateRate(workType, complexity, duration) {        
    workItemType = document.getElementById("workType").value;
    complexity = document.getElementById("complexity").value;
    duration = document.getElementById("workItemDuration").value;
    baseRate = calculatebaseRate();
    complexityFactor = calculateComplexityFactor();
    durationFactor = calculateDurationFactor();
    simulatedRate = baseRate * complexityFactor * durationFactor
    document.getElementById("demo").innerHTML = simulatedRate
}
</script>

{% endblock %}